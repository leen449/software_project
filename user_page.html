<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>User Page</title>
    <link rel="icon" href="images/logo.png" type="image/png" />
    <link rel="stylesheet" href="user_page.css" />
    <link rel="stylesheet" href="main.css">
  </head>

  <body>
    <header>
            <div class="header-content">
                <img src="images/logo.jpg" alt="StoryLense Logo" class="logo">
                <div class="search-container">
                    <input type="text" class="search-bar" placeholder="Search for movies...">
                </div>
                <a href="#" class="home-btn">Home Page</a>
            </div>
        </header>


    <!-- HEADER with fade animation -->
    <div class="fadeInUp-animation">
      <div class="top-header">
        <div class="profile-section">
          <img src="images/profile.jpg" alt="Profile" />
          <h1>welcome lamya</h1>
        </div>
        <button class="hamburger" id="hamburger">‚ò∞</button>
    </div>

      <!-- Hamburger Side Menu -->
      <nav class="side-menu" id="sideMenu">
        <ul>
          <li><a href="#">‚öôÔ∏è Profile</a></li>
          <li><a href="#">‚≠ê Account</a></li>
          <li><a href="#">üö™ Logout</a></li>
        </ul>
      </nav>
    </div>

    <!-- MOVIE SHELF -->
    <section class="shelf-section">
      <h2>üéûÔ∏è My Shelf</h2>
      <div class="container">
        <!-- CARD 1 -->
        <div class="card">
          <img src="images/Inception Poster.jpg" alt="" />
          <div class="card-content">
            <h3>Inception</h3>
            <h3>‚≠ê 4.5 / 5</h3>
            <p>Rated: Oct 12, 2025</p>
            <p>Rewatch #2</p>
          </div>

          <!-- ‚ãÆ MENU -->
          <div class="card-actions">
            <button class="menu-btn">‚ãÆ</button>
            <div class="menu-popup">
              <button class="edit-option">Edit</button>
              <button class="delete-option">Delete</button>
            </div>
          </div>
        </div>

        <!-- CARD 2 -->
        <div class="card">
          <img src="images/Interstellar Poster.jpg" alt="" />
          <div class="card-content">
            <h3>Interstellar</h3>
            <h3>‚≠ê 5 / 5</h3>
            <p>Rated: Oct 25, 2025</p>
          </div>

          <div class="card-actions">
            <button class="menu-btn">‚ãÆ</button>
            <div class="menu-popup">
              <button class="edit-option">Edit</button>
              <button class="delete-option">Delete</button>
            </div>
          </div>
        </div>

        <!-- CARD 3 -->
        <div class="card">
          <img src="images/La La Land Poster.jpg" alt="" />
          <div class="card-content">
            <h3>La La Land</h3>
            <h3>‚≠ê 4 / 5</h3>
            <p>Rated: Sep 18, 2025</p>
          </div>

          <div class="card-actions">
            <button class="menu-btn">‚ãÆ</button>
            <div class="menu-popup">
              <button class="edit-option">Edit</button>
              <button class="delete-option">Delete</button>
            </div>
          </div>
        </div>

        <!-- CARD 4 -->
        <div class="card">
          <img src="images/avatar poster.jpeg" alt="" />
          <div class="card-content">
            <h3>Avatar</h3>
            <h3>‚≠ê 3.5 / 5</h3>
            <p>Rated: Oct 5, 2025</p>
          </div>

          <div class="card-actions">
            <button class="menu-btn">‚ãÆ</button>
            <div class="menu-popup">
              <button class="edit-option">Edit</button>
              <button class="delete-option">Delete</button>
            </div>
          </div>
        </div>
      </div>

      <div class="shelf-bar"></div>
    </section>

    <!-- EDIT MODAL -->
    <div class="edit-modal" id="editModal">
      <div class="modal-content">
        <h3>Edit Rating</h3>
        <label for="newRating">New Rating (‚≠ê):</label>
        <input type="number" id="newRating" min="0" max="5" step="0.5" />
        <label for="newReview">New Review:</label>
        <textarea
          id="newReview"
          rows="3"
          placeholder="Write your new review..."
        ></textarea>
        <div class="modal-buttons">
          <button id="saveEdit">Save</button>
          <button id="cancelEdit">Cancel</button>
        </div>
      </div>
    </div>
     <footer>
            <div class="footer-content">
                <div class="vision-title">OUR VISION</div>
                <div class="vision-text">
                    At StoryLense, we make rating movies simple, engaging, and accessible for everyone
                </div>
                <div class="copyright">&copy; StoryLense. All rights reserved.</div>
                <div class="social-icons">
                    <img src="images/x-logo.png" alt="X" class="social-icon">
                    <img src="images/instagram-logo.png" alt="Instagram" class="social-icon">
                </div>
            </div>
        </footer>

    <!-- ‚úÖ STAGGERED CARD ANIMATION -->
    <script>
      window.addEventListener("load", () => {
        const cards = document.querySelectorAll(".card");
        cards.forEach((card, index) => {
          setTimeout(() => card.classList.add("show"), 200 * index);
        });
      });
    </script>

    <!-- ‚úÖ EXISTING FUNCTIONALITY -->
    <script>
      const menuBtns = document.querySelectorAll(".menu-btn");
      let openMenu = null;
      let currentCard = null;

      // --- Open/close kebab menu ---
      menuBtns.forEach((btn) => {
        const popup = btn.nextElementSibling;
        btn.addEventListener("click", (e) => {
          e.stopPropagation();
          if (openMenu && openMenu !== popup) openMenu.style.display = "none";
          popup.style.display =
            popup.style.display === "flex" ? "none" : "flex";
          popup.style.flexDirection = "column";
          openMenu = popup.style.display === "flex" ? popup : null;
        });
      });

      // --- Close popup when clicking outside ---
      document.addEventListener("click", () => {
        if (openMenu) {
          openMenu.style.display = "none";
          openMenu = null;
        }
      });

      // --- Delete option ---
      document.querySelectorAll(".delete-option").forEach((btn) => {
        btn.addEventListener("click", (e) => {
          e.stopPropagation();
          if (confirm("Are you sure you want to delete this rating?")) {
            btn.closest(".card").remove();
          }
        });
      });

      // --- Edit option ---
      const modal = document.getElementById("editModal");
      const saveEditBtn = document.getElementById("saveEdit");
      const cancelEditBtn = document.getElementById("cancelEdit");

      document.querySelectorAll(".edit-option").forEach((btn) => {
        btn.addEventListener("click", (e) => {
          e.stopPropagation();
          currentCard = btn.closest(".card");
          const currentRating = currentCard
            .querySelector(".card-content h3:nth-of-type(2)")
            .textContent.match(/[\d.]+/);
          const currentReview = currentCard
            .querySelector(".card-content p:last-child")
            ?.textContent.replace(/"/g, "");

          document.getElementById("newRating").value = currentRating
            ? currentRating[0]
            : "";
          document.getElementById("newReview").value = currentReview || "";

          modal.style.display = "flex";
          if (openMenu) openMenu.style.display = "none";
          openMenu = null;
        });
      });

      // --- Save edit ---
      saveEditBtn.addEventListener("click", () => {
        const newRating = document.getElementById("newRating").value;
        const newReview = document.getElementById("newReview").value;
        if (currentCard) {
          const ratingElem = currentCard.querySelector(
            ".card-content h3:nth-of-type(2)"
          );
          const reviewElem = currentCard.querySelector(
            ".card-content p:last-child"
          );
          if (newRating) ratingElem.textContent = `‚≠ê ${newRating} / 5`;
          if (newReview) reviewElem.textContent = `"${newReview}"`;
        }
        modal.style.display = "none";
        currentCard = null;
      });

      // --- Cancel edit ---
      cancelEditBtn.addEventListener("click", () => {
        modal.style.display = "none";
        currentCard = null;
      });

      // --- Close modal when clicking outside ---
      window.addEventListener("click", (e) => {
        if (e.target === modal) {
          modal.style.display = "none";
          currentCard = null;
        }
      });

      // --- Hamburger toggle ---
      const hamburger = document.getElementById("hamburger");
      const sideMenu = document.getElementById("sideMenu");

      hamburger.addEventListener("click", () => {
        sideMenu.classList.toggle("open");
      });

      window.addEventListener("click", (e) => {
        if (!sideMenu.contains(e.target) && e.target !== hamburger) {
          sideMenu.classList.remove("open");
        }
      });
    </script>
  </body>
</html>
